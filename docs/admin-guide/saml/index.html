
<!DOCTYPE html>
<html class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documenation for Gluu Server">
      
      
      
      
        <link rel="shortcut icon" href="../../favicon.ico">
      
      <meta name="generator" content="mkdocs+mkdocs-material#1.0.3">
    
    
      
        <title>SAML SSO - Gluu Docs</title>
      
    
    
      <script src="../../assets/javascripts/modernizr-facb31f4a3.js"></script>
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application-f3ab63f78a.css">
      
      
    
    
  </head>
  
  
  
  
    <body>
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Gluu Docs" class=" md-logo  md-header-nav__button">
          
            <img src="../../gluu.jpg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  Administration Guide
                </span>
              
            
            SAML SSO
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search">
  <div class="md-search__overlay"></div>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" accesskey="s" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false">
      <label class="md-icon md-search__icon" for="search"></label>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result"></div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            
              


  


  <a href="https://github.com/GluuFederation/docs-3" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

            
          </div>
      </div>
    </div>
  </nav>
</header>
    
    <div class="md-container">
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <i class=" md-logo  md-nav__button">
      
        <img src="../../gluu.jpg">
      
    </i>
    Gluu Docs
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/GluuFederation/docs-3" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  <li class="md-nav__item">
    
      <a href="../.." title="Home" class="md-nav__link">
        Home
      </a>
    
  </li>

    
      
      
  <li class="md-nav__item">
    
      <a href="../../operation/intro/" title="Whats new in 3.0" class="md-nav__link">
        Whats new in 3.0
      </a>
    
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Installation Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-3">
        Installation Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../installation-guide/" title="Preparing VM" class="md-nav__link">
        Preparing VM
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../installation-guide/install/" title="Install Gluu Server" class="md-nav__link">
        Install Gluu Server
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-3" type="checkbox" id="nav-3-3">
    
    <label class="md-nav__link" for="nav-3-3">
      Upgrade/Patch Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-3-3">
        Upgrade/Patch Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../upgrade/update-war/" title="Updating a War File" class="md-nav__link">
        Updating a War File
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Administration Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-4">
        Administration Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../oxtrust-ui/" title="oxTrust admin UI" class="md-nav__link">
        oxTrust admin UI
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../auth-management/" title="Authentication Management" class="md-nav__link">
        Authentication Management
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3" type="checkbox" id="nav-4-3">
    
    <label class="md-nav__link" for="nav-4-3">
      User Authentication Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-4-3">
        User Authentication Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../user-authentications/" title="User Authentication Introduction" class="md-nav__link">
        User Authentication Introduction
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../authn-guide/U2F/" title="U2f" class="md-nav__link">
        U2f
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../authn-guide/DUO/" title="DUO" class="md-nav__link">
        DUO
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../authn-guide/supergluu/" title="oxPush2-Super Gluu" class="md-nav__link">
        oxPush2-Super Gluu
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../authn-guide/cert-auth/" title="certificate Authentication" class="md-nav__link">
        certificate Authentication
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../authn-guide/google/" title="Google" class="md-nav__link">
        Google
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../authn-guide/customauthn/" title="Custom Script Authentication" class="md-nav__link">
        Custom Script Authentication
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../authn-guide/passport/" title="Passport" class="md-nav__link">
        Passport
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../authn-guide/otp/" title="HOTP/TOTP" class="md-nav__link">
        HOTP/TOTP
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../user-group/" title="User Management" class="md-nav__link">
        User Management
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../logs/" title="Log Management" class="md-nav__link">
        Log Management
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../clients/" title="OpenID Clients" class="md-nav__link">
        OpenID Clients
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        SAML SSO
      </label>
    
    <a href="./" title="SAML SSO" class="md-nav__link md-nav__link--active">
      SAML SSO
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#outbound-saml" title="Outbound SAML" class="md-nav__link">
    Outbound SAML
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trust-relationship-requirements" title="Trust Relationship Requirements" class="md-nav__link">
    Trust Relationship Requirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-trust-relationship" title="Create a Trust Relationship" class="md-nav__link">
    Create a Trust Relationship
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#relying-party-configuration" title="Relying Party Configuration" class="md-nav__link">
    Relying Party Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#federation-configuration" title="Federation Configuration" class="md-nav__link">
    Federation Configuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inbound-saml" title="Inbound SAML" class="md-nav__link">
    Inbound SAML
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#required-setup" title="Required Setup" class="md-nav__link">
    Required Setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specific-setup-details" title="Specific Setup Details" class="md-nav__link">
    Specific Setup Details
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-script-configuration" title="Custom Script Configuration" class="md-nav__link">
    Custom Script Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-idp-in-asimba-server" title="Adding IDP in Asimba Server" class="md-nav__link">
    Adding IDP in Asimba Server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-sp-requestor-in-asimba-server" title="Adding SP Requestor in Asimba Server" class="md-nav__link">
    Adding SP Requestor in Asimba Server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-asimba-with-saml-proxy" title="Test Asimba with SAML Proxy" class="md-nav__link">
    Test Asimba with SAML Proxy
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../openid-connect/" title="OpenID Connect" class="md-nav__link">
        OpenID Connect
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../uma/" title="UMA" class="md-nav__link">
        UMA
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../attribute/" title="Attribute Management" class="md-nav__link">
        Attribute Management
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../scim-uma/" title="SCIM protected by UMA" class="md-nav__link">
        SCIM protected by UMA
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../certificate/" title="Certificate Management" class="md-nav__link">
        Certificate Management
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../faq/" title="FAQ & Troubleshooting" class="md-nav__link">
        FAQ & Troubleshooting
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Integration Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-5">
        Integration Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/saml-sp/" title="Shibboleth SP" class="md-nav__link">
        Shibboleth SP
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/openidc-rp/" title="Mod_auth_OpenID" class="md-nav__link">
        Mod_auth_OpenID
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/oauth2/" title="OXD OAuth2" class="md-nav__link">
        OXD OAuth2
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/google/" title="Google SSO" class="md-nav__link">
        Google SSO
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/office/" title="Office 365" class="md-nav__link">
        Office 365
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/salesforce/" title="Salesforce" class="md-nav__link">
        Salesforce
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../integration/dropbox/" title="Dropbox" class="md-nav__link">
        Dropbox
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Reference
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-6">
        Reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6-1" type="checkbox" id="nav-6-1">
    
    <label class="md-nav__link" for="nav-6-1">
      Gluu API Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible">
      <label class="md-nav__title" for="nav-6-1">
        Gluu API Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
  <li class="md-nav__item">
    
      <a href="../../api-guide/api/" title="Custom ID Generation" class="md-nav__link">
        Custom ID Generation
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../api-guide/openid-connect-api/" title="OpenID Connect API" class="md-nav__link">
        OpenID Connect API
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../api-guide/scim-api/" title="SCIM API Configuration" class="md-nav__link">
        SCIM API Configuration
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../api-guide/uma-api/" title="UMA API" class="md-nav__link">
        UMA API
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../backup/" title="Backup Gluu Server CE" class="md-nav__link">
        Backup Gluu Server CE
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../custom-script/" title="Custom Script in Gluu CE" class="md-nav__link">
        Custom Script in Gluu CE
      </a>
    
  </li>

        
          
          
  <li class="md-nav__item">
    
      <a href="../../installation-guide/setup_py/" title="Setup Script Options" class="md-nav__link">
        Setup Script Options
      </a>
    
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#outbound-saml" title="Outbound SAML" class="md-nav__link">
    Outbound SAML
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#trust-relationship-requirements" title="Trust Relationship Requirements" class="md-nav__link">
    Trust Relationship Requirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#create-a-trust-relationship" title="Create a Trust Relationship" class="md-nav__link">
    Create a Trust Relationship
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#relying-party-configuration" title="Relying Party Configuration" class="md-nav__link">
    Relying Party Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#federation-configuration" title="Federation Configuration" class="md-nav__link">
    Federation Configuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inbound-saml" title="Inbound SAML" class="md-nav__link">
    Inbound SAML
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#required-setup" title="Required Setup" class="md-nav__link">
    Required Setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#specific-setup-details" title="Specific Setup Details" class="md-nav__link">
    Specific Setup Details
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-script-configuration" title="Custom Script Configuration" class="md-nav__link">
    Custom Script Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-idp-in-asimba-server" title="Adding IDP in Asimba Server" class="md-nav__link">
    Adding IDP in Asimba Server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#adding-sp-requestor-in-asimba-server" title="Adding SP Requestor in Asimba Server" class="md-nav__link">
    Adding SP Requestor in Asimba Server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-asimba-with-saml-proxy" title="Test Asimba with SAML Proxy" class="md-nav__link">
    Test Asimba with SAML Proxy
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
               
                 <a href="https://github.com/GluuFederation/docs-3/edit/master/docs/admin-guide\saml.md" title="Edit this page" class="md-icon md-content__edit">edit</a>
               
              
                
                <h1 id="saml">SAML<a class="headerlink" href="#saml" title="Permanent link">#</a></h1>
<h2 id="outbound-saml">Outbound SAML<a class="headerlink" href="#outbound-saml" title="Permanent link">#</a></h2>
<p>Outbound SAML can also be called SP-initiated Single Sign On (SSO) or traditional SAML. In an outbound SAML transaction, the SP redirects the user to the designated Identity Provider (IDP) for authentication and authorization. The IDP will ask for the username and password for the user and up on successful authentication, the user is sent back to the SP logged in. The requirement for the IDP is a trust relationship (TR) set up beforehand with the SP. The next section covers how to set up a TR in Gluu Server.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For any SAML transaction, a trust relationship must be created with the IDP.</p>
</div>
<h3 id="trust-relationship-requirements">Trust Relationship Requirements<a class="headerlink" href="#trust-relationship-requirements" title="Permanent link">#</a></h3>
<p>Trust Relationship requires the infomation listed below.</p>
<p><strong>Metadata of the SP</strong>
Metadata is a XML file which has configuration data used to provision any website (SP) or IDP (Gluu Server) to communicate with each other. It is interchangeable between the IDP and the SP.</p>
<p>Websites (SP) can provide metadata via URL or as a separate file.</p>
<p><strong>Required Attributes</strong>
Every organization has their own policy to release/share attributes with
any IDP or SP. The oxTrust GUI supports both preconfigured and custom attribute
Release to the SP. The administrator only needs to click on the desired 
attribute and it will be released to the SP.</p>
<p><strong>SSO Testing Endpoint</strong>
Every website (SP) should have both a staging and a production URI
endpoint which can be checked for SSO, where the user will access to log
into that SP.</p>
<h3 id="create-a-trust-relationship">Create a Trust Relationship<a class="headerlink" href="#create-a-trust-relationship" title="Permanent link">#</a></h3>
<ul>
<li>Go to SAML → Trust Relationships</li>
<li>Click on “Add Relationship”</li>
</ul>
<p><img alt="addTR" src="../../img/saml/addTR.png" /></p>
<ul>
<li>A new page will appear. Here, as a Gluu Server administrator you need
  to provide all the information regarding the SP to establish Trust
  Relationship from Gluu Server.</li>
</ul>
<p><img alt="newTR" src="../../img/saml/newTR.png" /></p>
<ul>
<li><em>Display Name</em>: Name of the Trust Relationship (it should be unique for every trust relationship)</li>
<li><em>Description</em>: Little description. Purpose and SSO link can be added here.</li>
<li><em>Metadata Type</em>: Depending on trusted party’s metadata (SP), there are four available types in Gluu Server<ul>
<li><em>File</em>: If SP has uploadable metadata in XML format, this option works best.</li>
<li><em>URI</em>: If the metadata of SP has URI link and accessible from the internet, Gluu Server Administrator can use this option.</li>
</ul>
</li>
<li><em>Released</em>: The attributes that are required for the SP must be in this pane. The required attributes can be selected from the left side pane with the heading “Release Additional Attributes”.
The TR is added by clicking on the <code>Add</code> button located in the lower left side of the page.</li>
</ul>
<h3 id="relying-party-configuration">Relying Party Configuration<a class="headerlink" href="#relying-party-configuration" title="Permanent link">#</a></h3>
<p>The Relying Party must be configured for some SPs. The relying party configuration is accessible on the TR Creation page. The checkbox <code>Configure specific Relying Party</code> must be checked.</p>
<p><img alt="enable-relying-party.png" src="../../img/saml/enable-relying-party.png" /></p>
<p>The checkbox will result in a link which can be accessed to configure relying party for the TR. The image below shows the relying party config panel from which the administrator can add the specific option.</p>
<p><img alt="tr-relying-party" src="../../img/saml/tr-relying-party.png" /></p>
<h3 id="federation-configuration">Federation Configuration<a class="headerlink" href="#federation-configuration" title="Permanent link">#</a></h3>
<p>If the SP is part of any identity federation such as InCommon Federation, then the administrator must add the federation as a SP in Gluu Server. This will allow the administrator to add SPs under the federation easily from a TR. The requirement of a federation TR created using the general TR is a must. The example below shows an administrator adding a TR for InCommon Federation.</p>
<p><img alt="federationTR" src="../../img/saml/federationTR.png" /></p>
<p>Once this is done, the SPs under the federation can be added by selecting the Federation from the <code>Federation Name</code> drop down menu and selecting the entity-id for the SP.</p>
<p><img alt="federation-entityid.png" src="../../img/saml/federation-entityid.png" /></p>
<h2 id="inbound-saml">Inbound SAML<a class="headerlink" href="#inbound-saml" title="Permanent link">#</a></h2>
<p>Gluu Server uses an open source product called Asimba to achieve inbound SAML. Asimba allows websites to use a single IDP for SSO even when the organization has multiple trusted IDPs. Please see the <a href="http://www.asimba.org/site/">Asimba website</a> for more information.</p>
<p>Gluu Server is shipped with the SAML Script which simplifies the process of using SAML Proxy. The SAML proxy configuration is made easy from the oxTrust admin interface. This section provides a step-by-step method of configuring the proxy with two (2) IDPs and a single SP. The administrator can add multiple IDPs or SPs if required using the same method. However, it is mandatory that all the SPs and IDPs are connected to the Asimba server, or the IDP that has the Asimba module enabled.
i<img alt="asimba-overview" src="../../img/asimba/overview.png" /></p>
<h3 id="required-setup">Required Setup<a class="headerlink" href="#required-setup" title="Permanent link">#</a></h3>
<table>
<thead>
<tr>
<th>Setup hostname</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>https://sp.gluu.org/protected/print.py</td>
<td>This is a shibboleth SP connected to <em>https://test.gluu.org</em></td>
</tr>
<tr>
<td>https://test.gluu.org</td>
<td>This is a Gluu Server SAML IdP with Asimba</td>
</tr>
<tr>
<td>https://nest.gluu.org</td>
<td>This is a second Gluu Server SAML IdP connected to <em>https://test.gluu.org</em></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Description of SAML Authentication Module is available here: https://github.com/GluuFederation/oxAuth/tree/master/Server/integrations/saml</p>
</div>
<h3 id="specific-setup-details">Specific Setup Details<a class="headerlink" href="#specific-setup-details" title="Permanent link">#</a></h3>
<p>The Gluu Server setup with the hostname <code>https://test.gluu.org</code> must be setup with Asimba. This is done by typing <code>yes</code> to the <a href="../../installation-guide/setup_py/">setup script prompt</a>.</p>
<p><img alt="asimba-install" src="../../img/asimba/asimba-install.png" /></p>
<h3 id="custom-script-configuration">Custom Script Configuration<a class="headerlink" href="#custom-script-configuration" title="Permanent link">#</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The configuration below is done in the Gluu Server with Asimba installed with the hostname <code>https://test.gluu.org</code>.</p>
</div>
<ul>
<li>
<p>Log into the oxTrust interface as <code>admin</code></p>
</li>
<li>
<p>Navigate to Configuration --&gt; Manage Custom Scripts</p>
</li>
</ul>
<p><img alt="custom-script-menu" src="../../img/oxtrust/custom-script-menu.png" /></p>
<ul>
<li>Select/Add <code>saml</code> script from <code>Person Authentication</code> tab</li>
</ul>
<p><img alt="custom-script-person-authentication" src="../../img/asimba/cspa.png" /></p>
<ul>
<li>Name: saml<ul>
<li>Description: Saml Authentication module</li>
<li>Programming Language: Python</li>
<li>Level: 1</li>
<li>Location Type: LDAP</li>
<li>Usage Type: Web</li>
<li>Custom property (key/value)</li>
<li>saml_deployment_type: enroll</li>
<li>saml_idp_sso_target_url: https://test.gluu.org/asimba/profiles/saml2/sso/web</li>
<li>saml_validate_response: false</li>
<li>asimba_entity_id: https://test.gluu.org/saml</li>
<li>asimba_saml_certificate_file: /etc/certs/saml.pem <ul>
<li>note: Deployer need to copy 'asimba.crt' in 'saml.pem' without the 'BEGIN CERTIFICATE' and 'END CERTIFICATE' tag. </li>
</ul>
</li>
<li>user_object_classes: eduPerson</li>
<li>saml_idp_attributes_mapping: { "attribute_name": ["attribute_name", "SAML2 URI"] } <ul>
<li>example: <code>{"uid": ["uid", "urn:oid:0.9.2342.19200300.100.1.1"], "mail": ["mail", "urn:oid:0.9.2342.19200300.100.1.3"], "givenName": ["givenName", "urn:oid:2.5.4.42"], "sn": ["sn", "urn:oid:2.5.4.4"], "eduPersonPrincipalName": ["eduPersonPrincipalName", "urn:oid:1.3.6.1.4.1.5923.1.1.1.6"] }</code></li>
</ul>
</li>
<li>enforce_uniqueness_attr_list: attribute1, attribute2<ul>
<li>example: <code>edupersonprincipalname, uid, mail, givenName</code></li>
</ul>
</li>
<li>saml_use_authn_context: false</li>
<li>saml_generate_name_id: true</li>
<li>Script: Please copy the <a href="https://github.com/GluuFederation/oxAuth/blob/master/Server/integrations/saml/SamlExternalAuthenticator.py">SAML Script</a> from Github. </li>
<li>Enabled: True</li>
</ul>
</li>
</ul>
<p><img alt="enabled" src="../../img/oxtrust/enable.png" /></p>
<h3 id="adding-idp-in-asimba-server">Adding IDP in Asimba Server<a class="headerlink" href="#adding-idp-in-asimba-server" title="Permanent link">#</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The configuration below is done in the Gluu Server with Asimba installed with the hostname <code>https://test.gluu.org</code>.</p>
</div>
<ul>
<li>
<p>Log into the oxTrust interface</p>
</li>
<li>
<p>Navigate to SAML --&gt; Idp</p>
</li>
</ul>
<p><img alt="image" src="../../img/asimba/asimba_idp.png" /></p>
<ul>
<li>Click on 'Add IDP' button</li>
</ul>
<p><img alt="image" src="../../img/asimba/asimba-idp_button.png" /></p>
<ul>
<li>
<p>Fill up the form with the information below:</p>
<ul>
<li>
<p>ID: The entityID of the remote ID/ADFS </p>
<ul>
<li>Example: <code>https:&lt;hostname_of_gluu_server&gt;/idp/shibboleth</code>  </li>
</ul>
</li>
<li>
<p>Friendly Name: There is no particular format for this field, use anything </p>
</li>
<li>
<p>Metadata URL: Keep it blank, we will upload metadata</p>
</li>
<li>
<p>Metadata Timeout: Keep it as it is. </p>
</li>
<li>
<p>Metadata File: Download metadata of remote IDP/ADFS and upload that XML file. </p>
<ul>
<li>Example: The metadata for Gluu IdP can be downloaded using <code>wget -c https:&lt;hostname_of_gluu_server&gt;/idp/shibboleth</code></li>
</ul>
</li>
<li>
<p>Trust Certificate File: Grab the SAML cert from remote IDP/ADFS and upload that x509 certificate</p>
<ul>
<li>Example: You will get the SAML certificate from Gluu Server's metadata link or available inside <code>/etc/certs/shibIDP.crt</code></li>
</ul>
</li>
<li>
<p>NameIDFormat: SAML2 URI nameID format if remote IDP is a Gluu Server otherwise ask for their nameID format.</p>
<ul>
<li>Example: `urn:oasis:names:tc:SAML:2.0:nameid-format:transient'</li>
</ul>
</li>
<li>
<p>Enabled: Yes</p>
</li>
<li>
<p>Send Scoping: Yes</p>
</li>
<li>
<p>AllowCreate: Yes</p>
</li>
<li>
<p>Disable SSO for IDP: No</p>
</li>
<li>
<p>ACS index: Yes</p>
</li>
<li>
<p>Send NameIDPolicy: Yes</p>
</li>
<li>
<p>Avoid Subject Confirmations: No</p>
</li>
</ul>
</li>
</ul>
<p><img alt="image" src="../../img/asimba/add_idp.png" /></p>
<h3 id="adding-sp-requestor-in-asimba-server">Adding SP Requestor in Asimba Server<a class="headerlink" href="#adding-sp-requestor-in-asimba-server" title="Permanent link">#</a></h3>
<ul>
<li>
<p>Log into oxTrust interface</p>
</li>
<li>
<p>Navigate to SAML --&gt; SP Requestor</p>
</li>
</ul>
<p><img alt="image" src="../../img/asimba/asimba-sp_menu.png" /></p>
<ul>
<li>Click on 'Add SP Requestor'</li>
</ul>
<p><img alt="image" src="../../img/asimba/asimba-sp_addbutton.png" /></p>
<ul>
<li>Please fill up the form with the information below:<ul>
<li>Select parent SP Pool: requestorpool.1</li>
<li>ID: https://test.gluu.org/saml</li>
<li>Friendly Name: oxAuth SAML</li>
<li>Metadata URL: Not required</li>
<li>Metadata Timeout: -1</li>
<li>Metadata File: Create a SAML metadata like below and save it as 'saml_oxauth_metadata.xml'. Upload this metadata. </li>
<li>Trust Certificate File: Not required</li>
<li>Properties: Not required</li>
<li>Enabled: Yes</li>
<li>Signing: No</li>
<li>metadata snippet: </li>
</ul>
</li>
</ul>
<pre><code>&lt;md:EntityDescriptor xmlns:md=&quot;urn:oasis:names:tc:SAML:2.0:metadata&quot; entityID=&quot;https://test.gluu.org/saml&quot;&gt;
  &lt;md:SPSSODescriptor protocolSupportEnumeration=&quot;urn:oasis:names:tc:SAML:2.0:protocol&quot;&gt;
    &lt;md:AssertionConsumerService Binding=&quot;urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST&quot; Location=&quot;https://test.gluu.org/oxauth/postlogin&quot; index=&quot;0&quot;/&gt;
  &lt;/md:SPSSODescriptor&gt;
  &lt;md:Organization&gt;
    &lt;md:OrganizationName xml:lang=&quot;en&quot;&gt;Gluu&lt;/md:OrganizationName&gt;
    &lt;md:OrganizationDisplayName xml:lang=&quot;en&quot;&gt;Gluu - Open Source Access Management&lt;/md:OrganizationDisplayName&gt;
    &lt;md:OrganizationURL xml:lang=&quot;en&quot;&gt;http://www.gluu.org&lt;/md:OrganizationURL&gt;
  &lt;/md:Organization&gt;
  &lt;md:ContactPerson contactType=&quot;technical&quot;&gt;
    &lt;md:GivenName&gt;Administrator&lt;/md:GivenName&gt;
    &lt;md:EmailAddress&gt;support@gluu.org&lt;/md:EmailAddress&gt;
  &lt;/md:ContactPerson&gt;
&lt;/md:EntityDescriptor&gt; 
</code></pre>

<p><img alt="image" src="../../img/asimba/add_sp2mod.png" /></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The configuration below is done in the Gluu Server with Asimba installed with the hostname <code>https://test.gluu.org</code>.</p>
</div>
<p>Create Trust relationships for all service provides which are included in SAML Proxy SSO workflow. In our test setup we created Trust relationship for remote SP which has entityID 'https://sp.gluu.org/shibboleth'. How to create Trust Relationship is available in <a href="#2.1-outbound-saml">Section 2.1</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The configuration below is done in the Gluu Server with Asimba installed with the hostname <code>https://nest.gluu.org</code>.</p>
</div>
<p>Log into the oxTrust inteface and follow the steps to add a new Trust Relationship.</p>
<ul>
<li>Gluu Server's Asimba metadata can be achieved from 'https://test.gluu.org/asimba/profiles/saml2'<ul>
<li>Download the metadata and use 'File' method to create Trust relationship</li>
</ul>
</li>
<li>Relying Party Configuration: 'SAML2SSO' Profile </li>
</ul>
<p><img alt="enable-replying-party" src="../../img/saml/enable-relying-party.png" />
<img alt="saml2sso" src="../../img/saml/saml2sso.png" /></p>
<pre><code>- example: 
    - includeAttributeStatement: Yes
    - assertionLifeTime: 300000
    - assertionProxyCount: 0
    - signResponses: conditional
    - signAssertions: never
    - signRequests: conditional
    - encryptAssertions: never
    - encryptNameIds: never
</code></pre>
<ul>
<li>Attribute: Any attribute Service Providers require. Any kind of nameID from below list is mandatory. <ul>
<li>nameID: <ul>
<li><code>nameIDFormat="urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified"</code></li>
<li><code>nameIDFormat="urn:oasis:names:tc:SAML:2.0:nameid-format:transient"</code></li>
<li><code>nameIDFormat="urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress"</code></li>
</ul>
</li>
<li>How to create nameID in Gluu Server is available <a href="https://gluu.org/docs/customize/attributes/#custom-nameid">here</a></li>
</ul>
</li>
</ul>
<h3 id="test-asimba-with-saml-proxy">Test Asimba with SAML Proxy<a class="headerlink" href="#test-asimba-with-saml-proxy" title="Permanent link">#</a></h3>
<p>Here is a quick video on how SAML Proxy SSO might look like. Here in this video we are using 'https://sp.gluu.org/protected/print.py' as our protected service provider link. After initiating the SSO, we are moved to Gluu Server's SAML Proxy discovery page ( https://test.gluu.org ). From there we selected 'Nest' as our desired authentication server. After succesful authentication we are landing to proctected resource. </p>
<ul>
<li><a href="https://youtu.be/YEyrOWJu0yo">Youtube Video Link</a></li>
</ul>
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../clients/" title="OpenID Clients" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                OpenID Clients
              </span>
            </div>
          </a>
        
        
          <a href="../openid-connect/" title="OpenID Connect" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                OpenID Connect
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2016, Gluu, Inc.
          </div>
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application-2afe21e0b2.js"></script>
      <script>var config={url:{base:"../.."}},app=new Application(config);app.initialize()</script>
      
    
    
      
    
  </body>
</html>